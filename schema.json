{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Gene Statistics Schema",
  "description": "Schema for genomic statistics including coding genes, long non-coding genes, short non-coding genes, and pseudogenes with per-transcript feature statistics",
  "type": "object",
  "properties": {
    "coding_genes": {
      "$ref": "#/definitions/geneCategory"
    },
    "long_non_coding_genes": {
      "$ref": "#/definitions/geneCategory"
    },
    "short_non_coding_genes": {
      "$ref": "#/definitions/geneCategory"
    },
    "pseudogenes": {
      "$ref": "#/definitions/geneCategory"
    }
  },
  "required": ["coding_genes", "long_non_coding_genes", "short_non_coding_genes", "pseudogenes"],
  "additionalProperties": false,
  "definitions": {
    "geneCategory": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "minimum": 0
        },
        "length": {
          "$ref": "#/definitions/lengthStats"
        },
        "transcripts": {
          "$ref": "#/definitions/transcripts"
        }
      },
      "required": ["count", "length", "transcripts"],
      "additionalProperties": false
    },
    "lengthStats": {
      "type": "object",
      "properties": {
        "min": {
          "type": "number",
          "minimum": 0
        },
        "max": {
          "type": "number",
          "minimum": 0
        },
        "mean": {
          "type": "number",
          "minimum": 0
        },
        "median": {
          "type": "number",
          "minimum": 0
        }
      },
      "required": ["min", "max", "mean", "median"],
      "additionalProperties": false
    },
    "transcripts": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "minimum": 0
        },
        "density": {
          "type": "number",
          "minimum": 0
        },
        "length": {
          "$ref": "#/definitions/lengthStats"
        },
        "by_type": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "$ref": "#/definitions/transcriptType"
            }
          },
          "additionalProperties": true
        }
      },
      "required": ["count", "density", "length", "by_type"],
      "additionalProperties": false
    },
    "transcriptType": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "minimum": 0
        },
        "density": {
          "type": "number",
          "minimum": 0
        },
        "length": {
          "$ref": "#/definitions/lengthStats"
        },
        "features": {
          "$ref": "#/definitions/featureStats"
        }
      },
      "required": ["count", "density", "length", "features"],
      "additionalProperties": false
    },
    "featureStats": {
      "type": "object",
      "properties": {
        "exon": {
          "$ref": "#/definitions/exonStats"
        },
        "intron": {
          "$ref": "#/definitions/intronStats"
        },
        "cds": {
          "$ref": "#/definitions/exonStats"
        }
      },
      "required": ["exon"],
      "additionalProperties": false
    },
    "exonStats": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "minimum": 0
        },
        "density": {
          "type": "number",
          "minimum": 0
        },
        "length": {
          "$ref": "#/definitions/lengthStats"
        },
        "length_concatenated": {
          "$ref": "#/definitions/lengthStats"
        }
      },
      "required": ["count", "density", "length", "length_concatenated"],
      "additionalProperties": false
    },
    "intronStats": {
      "type": "object",
      "properties": {
        "count": {
          "type": "integer",
          "minimum": 0
        },
        "density": {
          "type": "number",
          "minimum": 0
        },
        "length": {
          "$ref": "#/definitions/lengthStats"
        },
        "length_concatenated": {
          "$ref": "#/definitions/lengthStats"
        }
      },
      "required": ["count", "density", "length", "length_concatenated"],
      "additionalProperties": false
    }
  }
}

